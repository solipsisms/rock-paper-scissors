<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>

    <div id="round-results">0-0</div>

    <script>

        let playerPoints = 0;
        let computerPoints = 0;
        let rounds = 0;

        //buttons
        const rock = document.createElement('button');
        rock.innerText = 'Rock';
        rock.addEventListener('click', () => {
            let computerMove = getComputerChoice();
            playRound("rock", computerMove);
        })
        document.body.appendChild(rock)

        const paper = document.createElement('button');
        paper.innerText = 'Paper';
        paper.addEventListener('click', () => {
            let computerMove = getComputerChoice();
            playRound("paper", computerMove);
        })
        document.body.appendChild(paper)

        const scissors = document.createElement('button');
        scissors.innerText = 'Scissors';
        scissors.addEventListener('click', () => {
            let computerMove = getComputerChoice();
            playRound("scissors", computerMove);
        })
        document.body.appendChild(scissors)

        const refresh = document.createElement('button');
        refresh.innerText = 'Restart';
        refresh.addEventListener('click', () => {
            location.reload();
        })
        document.body.appendChild(refresh);

        function getComputerChoice() {
            //possible moves the computer can make
            let moves = ["Rock", "Paper", "Scissors"];
            //choose a random move
            let move = Math.floor(Math.random() * moves.length);
            //return the move
            return moves[move];
        }

        function playRound(playerSelection, computerSelection) {
            //still more rounds to keep playing
            if (rounds < 5) {
                //computer wins
                if (playerSelection === "rock" && computerSelection === "Paper") {
                    computerPoints += 1;
                    rounds += 1;
                } else if (playerSelection === "paper" && computerSelection === "Scissors") {
                    computerPoints += 1;
                    rounds += 1;
                } else if (playerSelection === "scissors" && computerSelection === "Rock") {
                    computerPoints += 1;
                    rounds += 1;
                //player wins
                } else if (playerSelection === "rock" && computerSelection === "Scissors") {
                    playerPoints += 1;
                    rounds += 1;
                } else if (playerSelection === "scissors" && computerSelection === "Paper") {
                    playerPoints += 1;
                    rounds += 1;
                } else if (playerSelection === "paper" && computerSelection === "Rock") {
                    playerPoints += 1;
                    rounds += 1;
                //tie
                } else {
                    document.getElementById("round-results").innerHTML = "Tie.";
                    return "Tie.";
                }
            //max rounds, end gameplay
            } else {
                //computer wins the game
                if (computerPoints > playerPoints) {
                    document.getElementById("round-results").innerHTML = "The Computer Won the Game.";
                }
                //player wins the game
                if (playerPoints > computerPoints) {
                    document.getElementById("round-results").innerHTML = "The Player Won the Game!"
                }
            }

        }

        /*

        still need to:
        - display running score (rather than text)
        - fix ties not counting as rounds (possibly, need above to properly test)
        - rounds are not properly counting

        - can do aesthetic ui!

        */
         

        function game() {
            //set up score board
            let finalResults = [0, 0];
            //once five rounds have been played the game is over
            let rounds = 0;
            //possible moves
            let moves = ["rock", "paper", "scissors"];

            //removed logic to only play 5 rounds
            while (rounds = 0) {
                //ask player for their move
                let playerMove = prompt("Please choose Rock, Paper, or Scissors.");
                //if the player hits cancel or types an empty message, end the game
                if (playerMove === null || playerMove.trim() === "") {
                    alert("Game cancelled");
                    return;
                } else {
                    //otherwise, change the player's move to all lower case so it can be determined regardless of how it was typed (as long as it was correctly)
                    playerMove = playerMove.toLowerCase();
                    //if the player types something that is not a valid move, start over and do not count this as a round
                    if (!moves.includes(playerMove)) {
                        alert("Invalid input. Please choose Rock, Paper, or Scissors.");
                        continue;
                    }
                    //get the computer's move
                    let computerMove = getComputerChoice();
                    //let function calculate who would wins this round
                    let roundResults = playRound(playerMove, computerMove);
                    if (roundResults.startsWith("Winner")) {
                        finalResults[0]++;
                        alert("Player won this round! The current score is " + finalResults[0] + "-" + finalResults[1]);
                        rounds++;
                    } else if (roundResults.startsWith("Loser")) {
                        finalResults[1]++;
                        alert("Computer won this round. The current score is " + finalResults[0] + "-" + finalResults[1]);
                        rounds++;
                    } else if (roundResults.startsWith("Tie")) {
                        alert("Tie. Score and number of rounds will not be affected.");
                        continue;
                    } else {
                        alert("Score and number of rounds will not be affected.");
                        continue;
                    }
                }
            }
            //when the game is over (five rounds have been played) print the final score and message of who won
            if (finalResults[0] > finalResults[1]) {
                alert("Player won! The final score was " + finalResults[0] + "-" + finalResults[1]);
            } else {
                alert("Computer won. The final score was " + finalResults[0] + "-" + finalResults[1]);
            }
        }
    </script>
</body>
</html>